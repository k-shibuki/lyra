# Local Configuration Overrides
# ==============================
#
# Copy this file to `local.yaml` and customize for your environment.
# local.yaml is gitignored and will not be committed.
#
# STRUCTURE
# ---------
# Top-level keys correspond to config file names (without .yaml extension):
#
#   settings:       -> overrides config/settings.yaml
#   academic_apis:  -> overrides config/academic_apis.yaml
#   domains:        -> overrides config/domains.yaml
#   engines:        -> overrides config/engines.yaml
#
# Only include the keys you want to override. Unspecified keys use defaults.
#
# PRIORITY (lowest to highest)
# ----------------------------
# 1. Base YAML files (settings.yaml, etc.)
# 2. local.yaml (this file)
# 3. Environment variables (LYRA_* prefix)
#
# ENVIRONMENT VARIABLES
# ---------------------
# For CI/CD or containerized environments, use environment variables:
#   LYRA_TASK_LIMITS__SEARCH_TIMEOUT_SECONDS=300
#   LYRA_TASK_LIMITS__MAX_BUDGET_PAGES_PER_TASK=200
#   LYRA_GENERAL__LOG_LEVEL=DEBUG
#
# Double underscores (__) denote nested keys.

# =============================================================================
# settings: (overrides settings.yaml)
# =============================================================================
settings:
  # General settings
  general:
    log_level: "DEBUG"  # DEBUG, INFO, WARNING, ERROR
    # Hybrid mode: MCP server on host + proxy container
    proxy_url: "http://localhost:8080"

  # Task limits
  # max_budget_pages_per_task: Max pages allowed per task (upper bound; default: 200)
  # search_timeout_seconds: Per-search timeout for safe pipeline stop (default: 300)
  #   Covers: Academic API + SERP + identifier processing + web page fetch + claim extraction
  task_limits:
    max_budget_pages_per_task: 200
    search_timeout_seconds: 300

  # Concurrency (ADR-0013/ADR-0014)
  concurrency:
    target_queue:
      num_workers: 2  # Parallel target workers
    browser_serp:
      max_tabs: 2  # Concurrent browser tabs

  # Browser settings
  browser:
    chrome_host: "localhost"
    chrome_base_port: 9222  # Worker 0 = 9222, Worker 1 = 9223, etc.
    chrome_profile_prefix: "Lyra-"
    # Focus policy (optional)
    chrome_start_minimized: false
    bring_to_front_on_auth_session_start: false

  # LLM/ML endpoints (environment dependent; keep here, not .env)
  llm:
    model: "qwen2.5:3b"
    # Host mode: http://localhost:11434
    # Hybrid/container: http://ollama:11434 (via proxy container network)
    ollama_host: "http://ollama:11434"

  ml:
    server_url: "http://ml:8100"

  # Tor settings (container name or localhost, depending on setup)
  tor:
    socks_host: "tor"
    socks_port: 9050
    control_port: 9051

  # Search settings overrides
  search:
    claims_extraction_scope: "reputable"

# =============================================================================
# academic_apis: (overrides academic_apis.yaml)
# =============================================================================
# academic_apis:
#   apis:
#     semantic_scholar:
#       enabled: true
#       api_key: "your-api-key-here"
#     openalex:
#       enabled: true

# =============================================================================
# domains: (overrides domains.yaml)
# =============================================================================
# domains:
#   blocked:
#     - example.com
#   priority:
#     - pubmed.ncbi.nlm.nih.gov

# =============================================================================
# engines: (overrides engines.yaml)
# =============================================================================
# engines:
#   default_engines:
#     - mojeek
#     - duckduckgo
#     - brave

