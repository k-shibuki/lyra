---
description: テストを計画または実行する前に、常に確認するルール
alwaysApply: false
---
# テスト修正ルール

## 修正開始前の必須ステップ
1. **仕様書を確認**: 該当機能の仕様書・ドキュメントを `read_file` で読む
2. **実装コードを確認**: テスト対象の実装を `read_file` で読む
3. **「どうあるべきか」を判断**: 仕様、実装およびテストの3つを照らし合わせ、どうあるべきかを推論する

## 修正方針
- テストが間違っている → テストを仕様に合わせて修正
- 実装が間違っている → 実装を仕様に合わせて修正（テストは正しい）
- 仕様が間違っているか、不明確 → ユーザーに確認してから修正

## 禁止
- **テスト通過を優先してテストを骨抜きにすること**
- アサーションの削除・緩和でエラーを回避すること
- モックを過剰に追加して実質的なテストを無効化すること
