{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "lyra:mcp:calibration_metrics",
  "title": "calibration_metrics Response",
  "description": "Response schema for calibration_metrics tool (Phase 6.3, 4 actions). Renamed from 'calibrate', removed 'add_sample' (use feedback(edge_correct) instead).",
  "oneOf": [
    {
      "title": "get_stats Response",
      "type": "object",
      "properties": {
        "ok": { "type": "boolean" },
        "action": { "type": "string", "const": "get_stats" },
        "stats": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "sample_count": { "type": "integer" },
              "brier_score": { "type": "number" },
              "version": { "type": "integer" },
              "method": { "type": "string" }
            }
          }
        }
      },
      "required": ["ok", "action", "stats"],
      "additionalProperties": false
    },
    {
      "title": "evaluate Response",
      "type": "object",
      "properties": {
        "ok": { "type": "boolean" },
        "action": { "type": "string", "const": "evaluate" },
        "evaluation_id": { "type": "string" },
        "source": { "type": "string" },
        "brier_score": { "type": "number" },
        "sample_count": { "type": "integer" },
        "degradation_detected": { "type": "boolean" }
      },
      "required": ["ok", "action", "evaluation_id", "source"],
      "additionalProperties": false
    },
    {
      "title": "get_evaluations Response",
      "type": "object",
      "properties": {
        "ok": { "type": "boolean" },
        "action": { "type": "string", "const": "get_evaluations" },
        "evaluations": {
          "type": "array",
          "items": { "type": "object" }
        }
      },
      "required": ["ok", "action", "evaluations"],
      "additionalProperties": false
    },
    {
      "title": "get_diagram_data Response",
      "type": "object",
      "properties": {
        "ok": { "type": "boolean" },
        "action": { "type": "string", "const": "get_diagram_data" },
        "source": { "type": "string" },
        "bins": { "type": "array" },
        "calibration_error": { "type": "number" }
      },
      "required": ["ok", "action", "source"],
      "additionalProperties": false
    }
  ]
}

